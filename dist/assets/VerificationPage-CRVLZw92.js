import{r,j as e,m as k,u as B}from"./index-DZGIym51.js";import{A as P}from"./AuthLayout-DyxEET22.js";import{B as S}from"./Button-BWkWWL1g.js";import{A as T}from"./arrow-left-Coh7GVSd.js";import{M as $}from"./mail-iXh5kbdk.js";import{C as A}from"./circle-check-big-kxv8sWiN.js";import{c as D}from"./createLucideIcon-Cj-1CTCN.js";import"./GlassCard-Cb11zpvi.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],z=D("refresh-cw",F),K=({email:c,onVerificationSuccess:u,onBack:h})=>{const[i,l]=r.useState(["","","","","",""]),[n,p]=r.useState(!1),[g,x]=r.useState(!1),[y,o]=r.useState(""),[m,j]=r.useState(60),[E,b]=r.useState(!1),d=r.useRef([]);r.useEffect(()=>{if(m>0){const t=setTimeout(()=>j(m-1),1e3);return()=>clearTimeout(t)}else b(!0)},[m]);const L=(t,s)=>{if(s.length>1){const f=s.slice(0,6).split(""),N=[...i];f.forEach((w,C)=>{t+C<6&&/^\d$/.test(w)&&(N[t+C]=w)}),l(N);const M=Math.min(t+f.length,5);d.current[M]?.focus();return}if(!/^\d*$/.test(s))return;const a=[...i];a[t]=s,l(a),o(""),s&&t<5&&d.current[t+1]?.focus(),a.every(f=>f!=="")&&a.join("").length===6&&v(a.join(""))},R=(t,s)=>{s.key==="Backspace"&&!i[t]&&t>0&&d.current[t-1]?.focus()},v=async t=>{p(!0),o("");try{await new Promise(s=>setTimeout(s,1500)),t.length===6?u():o("Invalid verification code. Please try again.")}catch{o("Verification failed. Please try again.")}finally{p(!1)}},V=async()=>{x(!0),o("");try{await new Promise(t=>setTimeout(t,1e3)),j(60),b(!1),l(["","","","","",""]),d.current[0]?.focus()}catch{o("Failed to resend code. Please try again.")}finally{x(!1)}},I=t=>{const s=Math.floor(t/60),a=t%60;return`${s}:${a.toString().padStart(2,"0")}`};return e.jsx(P,{title:"Verify Your Email",subtitle:`We've sent a 6-digit code to ${c}`,showLogo:!1,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("button",{onClick:h,className:"flex items-center gap-2 text-neutral-400 hover:text-neutral transition-colors text-sm",children:[e.jsx(T,{className:"h-4 w-4"}),"Back to login"]}),e.jsxs("div",{className:"flex items-center justify-center gap-3 p-4 bg-primary/5 border border-primary/20 rounded-lg",children:[e.jsx($,{className:"h-5 w-5 text-primary-400"}),e.jsx("span",{className:"text-neutral text-sm font-medium",children:c})]}),y&&e.jsx(k.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-center",children:e.jsx("p",{className:"text-red-400 text-sm",children:y})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral text-center",children:"Enter the 6-digit verification code"}),e.jsx("div",{className:"flex justify-center gap-3",children:i.map((t,s)=>e.jsx(k.input,{ref:a=>{d.current[s]=a},type:"text",maxLength:6,value:t,onChange:a=>L(s,a.target.value),onKeyDown:a=>R(s,a),className:"w-12 h-12 text-center text-lg font-bold bg-surface border border-glass-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all text-neutral",disabled:n,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1}},s))})]}),e.jsx(S,{onClick:()=>v(i.join("")),variant:"primary",size:"lg",fullWidth:!0,disabled:i.join("").length!==6||n,loading:n,className:"flex items-center justify-center gap-2",children:n?"Verifying...":e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-4 w-4"}),"Verify Code"]})}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("p",{className:"text-neutral/70 text-sm",children:"Didn't receive the code?"}),E?e.jsxs(S,{onClick:V,variant:"ghost",size:"sm",disabled:g,loading:g,className:"flex items-center justify-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),g?"Sending...":"Resend Code"]}):e.jsxs("p",{className:"text-neutral/50 text-sm",children:["Resend code in ",I(m)]})]}),e.jsx("div",{className:"text-center p-4 bg-surface/30 border border-glass-border rounded-lg",children:e.jsxs("p",{className:"text-xs text-neutral/60",children:["Check your spam folder if you don't see the email.",e.jsx("br",{}),"For demo purposes, any 6-digit code will work."]})})]})})},Q=()=>{const c=B(),[u,h]=r.useState("demo@fitvire.com");r.useEffect(()=>{const n=localStorage.getItem("pendingEmail");n&&h(n)},[]);const i=()=>{localStorage.removeItem("pendingEmail"),c("/dashboard")},l=()=>{localStorage.removeItem("pendingEmail"),c("/login")};return e.jsx(K,{email:u,onVerificationSuccess:i,onBack:l})};export{Q as VerificationPage,Q as default};
