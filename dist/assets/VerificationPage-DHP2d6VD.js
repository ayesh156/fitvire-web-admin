import{r as a,j as e,m as c,u as P}from"./index-CUOHatz0.js";import{A as $}from"./AuthLayout-D7woBCdN.js";import{B as S}from"./Button-B0yPuW82.js";import{A}from"./arrow-left-DGMfAXgE.js";import{c as F}from"./createLucideIcon-416et06r.js";import{M as D}from"./mail-WOe8QKTF.js";import{C as H}from"./circle-check-big-C3qhY9i8.js";import"./GlassCard-D31sd0LJ.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],K=F("refresh-cw",z),_=({email:l,onVerificationSuccess:p,onBack:f})=>{const[r,d]=a.useState(["","","","","",""]),[n,g]=a.useState(!1),[x,y]=a.useState(!1),[b,o]=a.useState(""),[u,v]=a.useState(60),[V,w]=a.useState(!1),m=a.useRef([]),j=r.join(""),R=r.every(t=>t!=="")&&j.length===6;a.useEffect(()=>{if(u>0){const t=setTimeout(()=>v(u-1),1e3);return()=>clearTimeout(t)}else w(!0)},[u]);const L=(t,s)=>{if(s.length>1){const h=s.slice(0,6).split(""),k=[...r];h.forEach((C,E)=>{t+E<6&&/^\d$/.test(C)&&(k[t+E]=C)}),d(k);const B=Math.min(t+h.length,5);m.current[B]?.focus();return}if(!/^\d*$/.test(s))return;const i=[...r];i[t]=s,d(i),o(""),s&&t<5&&m.current[t+1]?.focus(),i.every(h=>h!=="")&&i.join("").length===6&&N(i.join(""))},I=(t,s)=>{s.key==="Backspace"&&!r[t]&&t>0&&m.current[t-1]?.focus()},N=async t=>{g(!0),o("");try{await new Promise(s=>setTimeout(s,1500)),t.length===6?p():o("Invalid verification code. Please try again.")}catch{o("Verification failed. Please try again.")}finally{g(!1)}},M=async()=>{y(!0),o("");try{await new Promise(t=>setTimeout(t,1e3)),v(60),w(!1),d(["","","","","",""]),m.current[0]?.focus()}catch{o("Failed to resend code. Please try again.")}finally{y(!1)}},T=t=>{const s=Math.floor(t/60),i=t%60;return`${s}:${i.toString().padStart(2,"0")}`};return e.jsx($,{title:"Verify Your Email",subtitle:`Enter the 6-digit security code we just sent to ${l}`,backgroundClassName:"bg-[#191919]",showBackgroundDecor:!1,cardClassName:"bg-[#1f1f1f]/90 border border-white/10 shadow-2xl shadow-black/50",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs(c.button,{whileHover:{x:-3},whileTap:{scale:.97},onClick:f,className:"inline-flex items-center gap-2 text-sm font-semibold text-neutral/80 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/60 focus-visible:ring-offset-2 focus-visible:ring-offset-[#191919]/60 transition-all",children:[e.jsx(A,{className:"h-4 w-4"}),"Back to login"]}),V?e.jsx(c.div,{initial:{opacity:0,scale:.92},animate:{opacity:1,scale:1},children:e.jsxs(S,{onClick:M,variant:"outline",size:"sm",disabled:x,loading:x,className:"rounded-full border-white/20 bg-transparent text-neutral hover:text-white hover:border-primary/60 hover:bg-primary/10",children:[e.jsx(K,{className:"h-4 w-4"}),x?"Sending…":"Resend code"]})}):e.jsxs("div",{className:"inline-flex items-center gap-2 self-start rounded-full border border-white/10 bg-white/5 px-4 py-2 text-xs font-medium text-neutral/70",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-primary animate-pulse"}),"Resend available in ",T(u)]})]}),e.jsxs(c.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.4},className:"flex items-center gap-4 rounded-2xl border border-white/10 bg-white/5 px-5 py-4 shadow-inner shadow-black/40",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-xl bg-primary/10 text-primary",children:e.jsx(D,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.12em] text-neutral/60",children:"Verification email"}),e.jsx("span",{className:"text-base font-semibold text-white break-all",children:l})]})]}),b&&e.jsx(c.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},className:"rounded-2xl border border-red-500/50 bg-red-500/10 px-4 py-3 text-center",children:e.jsx("p",{className:"text-sm font-medium text-red-300",children:b})}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx("p",{className:"text-sm font-semibold text-neutral/80",children:"Enter your 6-digit verification code"}),e.jsx("p",{className:"text-xs text-neutral/60",children:"Use the code within 10 minutes to keep your account secure."})]}),e.jsx("div",{className:"grid grid-cols-6 gap-2 sm:gap-3",children:r.map((t,s)=>e.jsx(c.input,{ref:i=>{m.current[s]=i},type:"text",inputMode:"numeric",autoComplete:"one-time-code",maxLength:1,value:t,onChange:i=>L(s,i.target.value),onKeyDown:i=>I(s,i),"aria-label":`Verification digit ${s+1}`,className:"h-14 w-full rounded-2xl border border-white/10 bg-[#252525] text-center text-xl font-semibold text-white shadow-inner shadow-black/60 transition-all duration-200 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/40 focus:ring-offset-2 focus:ring-offset-[#191919] sm:h-16",disabled:n,initial:{opacity:0,y:16,scale:.92},animate:{opacity:1,y:0,scale:1},whileFocus:{scale:1.05},whileHover:{scale:1.03},transition:{delay:s*.05,duration:.35,ease:"easeOut"}},s))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{onClick:()=>N(j),variant:"primary",size:"lg",fullWidth:!0,disabled:!R||n,loading:n,className:"rounded-xl border-none shadow-lg shadow-primary/30 focus-visible:ring-primary/70",children:n?"Verifying…":e.jsxs("span",{className:"flex w-full items-center justify-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:"Verify code"})]})}),e.jsxs("p",{className:"text-center text-xs text-neutral/60",children:["Need a different email?"," ",e.jsx("button",{type:"button",onClick:f,className:"font-semibold text-primary transition-colors hover:text-primary-hover focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/60 focus-visible:ring-offset-2 focus-visible:ring-offset-[#191919]",children:"Go back to update it"})]})]}),e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"rounded-2xl border border-white/10 bg-[#202020]/70 px-5 py-4 text-sm text-neutral/70",children:e.jsxs("p",{className:"leading-relaxed",children:["Can’t find the email? Try searching for ",e.jsx("span",{className:"font-semibold text-white",children:"“FitVire verification”"})," or check your spam folder. For this demo environment, any six-digit code will confirm your account."]})})]})})},X=()=>{const l=P(),[p,f]=a.useState("demo@fitvire.com");a.useEffect(()=>{const n=localStorage.getItem("pendingEmail");n&&f(n)},[]);const r=()=>{localStorage.removeItem("pendingEmail"),l("/dashboard")},d=()=>{localStorage.removeItem("pendingEmail"),l("/login")};return e.jsx(_,{email:p,onVerificationSuccess:r,onBack:d})};export{X as VerificationPage,X as default};
